!function(s){"function"==typeof define&&define.amd?define(["jquery"],s):"object"==typeof module&&module.exports?module.exports=function(e,t){return void 0===t&&(t="undefined"!=typeof window?require("jquery"):require("jquery")(e)),s(t),t}:s(jQuery)}(function(c){"use strict";var t=c(document),r=c(window),p="selectric",s=".sl",l=["a","e","i","o","u","n","c","y"],i=[/[\xE0-\xE5]/g,/[\xE8-\xEB]/g,/[\xEC-\xEF]/g,/[\xF2-\xF6]/g,/[\xF9-\xFC]/g,/[\xF1]/g,/[\xE7]/g,/[\xFD-\xFF]/g],n=function(e,t){var s=this;s.element=e,s.$element=c(e),s.state={multiple:!!s.$element.attr("multiple"),enabled:!1,opened:!1,currValue:-1,selectedIdx:-1,highlightedIdx:-1},s.eventTriggers={open:s.open,close:s.close,destroy:s.destroy,refresh:s.refresh,init:s.init},s.init(t)};n.prototype={utils:{isMobile:function(){return/android|ip(hone|od|ad)/i.test(navigator.userAgent)},escapeRegExp:function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},replaceDiacritics:function(e){for(var t=i.length;t--;)e=e.toLowerCase().replace(i[t],l[t]);return e},format:function(e){var l=arguments;return(""+e).replace(/\{(?:(\d+)|(\w+))\}/g,function(e,t,s){return s&&l[1]?l[1][s]:l[t]})},nextEnabledItem:function(e,t){for(;e[t=(t+1)%e.length].hidden;);return t},previousEnabledItem:function(e,t){for(;e[t=(0<t?t:e.length)-1].hidden;);return t},toDash:function(e){return e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()},triggerCallback:function(e,t){var s=t.element,l=t.options["on"+e],i=[s].concat([].slice.call(arguments).slice(1));c.isFunction(l)&&l.apply(s,i),c(s).trigger(p+"-"+this.toDash(e),i)},arrayToClassname:function(e){var t=c.grep(e,function(e){return!!e});return c.trim(t.join(" "))}},init:function(e){var t=this;if(t.options=c.extend(!0,{},c.fn[p].defaults,t.options,e),t.utils.triggerCallback("BeforeInit",t),t.destroy(!0),t.options.disableOnMobile&&t.utils.isMobile())t.disableOnMobile=!0;else{t.classes=t.getClassNames();var s=c("<input/>",{class:t.options.hasSearch?"c-selectric-input":"hidden",readonly:t.utils.isMobile()}),l=c("<div/>",{class:t.classes.items,tabindex:-1}),i=c("<div/>",{class:t.classes.scroll}),n=c("<div/>",{class:t.classes.prefix,html:t.options.arrowButtonMarkup}),a=c("<span/>",{class:"label"}),o=t.$element.wrap("<div/>").parent().append(n.prepend(a),l,s),r=c("<div/>",{class:t.classes.hideselect});t.elements={input:s,items:l,itemsScroll:i,wrapper:n,label:a,outerWrapper:o},t.options.nativeOnMobile&&t.utils.isMobile()&&(t.elements.input=void 0,r.addClass(t.classes.prefix+"-is-native"),t.$element.on("change",function(){t.refresh()})),t.$element.on(t.eventTriggers).wrap(r),t.originalTabindex=t.$element.prop("tabindex"),t.$element.prop("tabindex",-1),t.populate(),t.activate(),t.utils.triggerCallback("Init",t)}},activate:function(){var e=this,t=e.elements.items.closest(":visible").children(":hidden").addClass(e.classes.tempshow),s=e.$element.width();t.removeClass(e.classes.tempshow),e.utils.triggerCallback("BeforeActivate",e),e.elements.outerWrapper.prop("class",e.utils.arrayToClassname([e.classes.wrapper,e.$element.prop("class").replace(/\S+/g,e.classes.prefix+"-$&"),e.options.responsive?e.classes.responsive:""])),e.options.inheritOriginalWidth&&0<s&&e.elements.outerWrapper.width(s),e.unbindEvents(),e.$element.prop("disabled")?(e.elements.outerWrapper.addClass(e.classes.disabled),e.elements.input&&e.elements.input.prop("disabled",!0)):(e.state.enabled=!0,e.elements.outerWrapper.removeClass(e.classes.disabled),e.$li=e.elements.items.removeAttr("style").find("li"),e.bindEvents()),e.utils.triggerCallback("Activate",e)},getClassNames:function(){var l=this,i=l.options.customClass,n={};return c.each("Input Items Open Disabled TempShow HideSelect Wrapper Focus Hover Responsive Above Below Scroll Group GroupLabel".split(" "),function(e,t){var s=i.prefix+t;n[t.toLowerCase()]=i.camelCase?s:l.utils.toDash(s)}),n.prefix=i.prefix,n},setLabel:function(){var s=this,t=s.options.labelBuilder;if(s.state.multiple){var e=c.isArray(s.state.currValue)?s.state.currValue:[s.state.currValue];e=0===e.length?[0]:e;var l=c.map(e,function(t){return c.grep(s.lookupItems,function(e){return e.index===t})[0]});l=c.grep(l,function(e){return 1<l.length||0===l.length?""!==c.trim(e.value):e}),l=c.map(l,function(e){return c.isFunction(t)?t(e):s.utils.format(t,e)}),s.options.multiple.maxLabelEntries&&(l.length>=s.options.multiple.maxLabelEntries+1?(l=l.slice(0,s.options.multiple.maxLabelEntries)).push(c.isFunction(t)?t({text:"..."}):s.utils.format(t,{text:"..."})):l.slice(l.length-1)),s.elements.label.html(l.join(s.options.multiple.separator))}else{var i=s.lookupItems[s.state.currValue];i.element.hasClass("placeholder")?s.elements.label.addClass("placeholder"):s.elements.label.removeClass("placeholder"),s.elements.label.html(c.isFunction(t)?t(i):s.utils.format(t,i))}},populate:function(){var l=this,e=l.$element.children(),t=l.$element.find("option"),s=t.filter(":selected"),i=t.index(s),n=0,a=l.state.multiple?[]:0;1<s.length&&l.state.multiple&&(i=[],s.each(function(){i.push(c(this).index())})),l.state.currValue=~i?i:a,l.state.selectedIdx=l.state.currValue,l.state.highlightedIdx=l.state.currValue,l.items=[],l.lookupItems=[],e.length&&(e.each(function(e){var t=c(this);if(t.is("optgroup")){var s={element:t,label:t.prop("label"),groupDisabled:t.prop("disabled"),items:[]};t.children().each(function(e){var t=c(this);s.items[e]=l.getItemData(n,t,s.groupDisabled||t.prop("disabled")),l.lookupItems[n]=s.items[e],n++}),l.items[e]=s}else l.items[e]=l.getItemData(n,t,t.prop("disabled")),l.lookupItems[n]=l.items[e],n++}),l.setLabel(),l.options.hasSearch&&l.elements.items.append(l.elements.input).addClass("selectric-has-search"),l.elements.items.append(l.elements.itemsScroll.html(l.getItemsMarkup(l.items))))},getItemData:function(e,t,s){return{index:e,element:t,value:t.val(),className:t.prop("class"),text:t.html(),slug:c.trim(this.utils.replaceDiacritics(t.html())),alt:t.attr("data-alt"),selected:t.prop("selected"),disabled:s}},getItemsMarkup:function(e){var s=this,l="<ul>";return c.isFunction(s.options.listBuilder)&&s.options.listBuilder&&(e=s.options.listBuilder(e)),c.each(e,function(e,t){void 0!==t.label?(l+=s.utils.format('<ul class="{1}"><li class="{2}">{3}</li>',s.utils.arrayToClassname([s.classes.group,t.groupDisabled?"disabled":"",t.element.prop("class")]),s.classes.grouplabel,t.element.prop("label")),c.each(t.items,function(e,t){l+=s.getItemMarkup(t.index,t)}),l+="</ul>"):l+=s.getItemMarkup(t.index,t)}),l+"</ul>"},getItemMarkup:function(e,t){var s=this,l=s.options.optionsItemBuilder,i={value:t.value,text:t.text,slug:t.slug,index:t.index};return s.utils.format('<li data-index="{1}" class="{2}">{3}</li>',e,s.utils.arrayToClassname([t.className,e===s.items.length-1?"last":"",t.disabled?"disabled":"",t.selected?"selected":""]),c.isFunction(l)?s.utils.format(l(t,this.$element,e),t):s.utils.format(l,i))},unbindEvents:function(){var e=this;e.elements.input&&e.elements.input.off(),e.elements.wrapper.add(e.$element).add(e.elements.outerWrapper).off(s)},bindEvents:function(){var l=this;l.elements.outerWrapper.on("mouseenter.sl mouseleave"+s,function(e){c(this).toggleClass(l.classes.hover,"mouseenter"===e.type),l.options.openOnHover&&(clearTimeout(l.closeTimer),"mouseleave"===e.type?l.closeTimer=setTimeout(c.proxy(l.close,l),l.options.hoverIntentTimeout):l.open())}),l.elements.wrapper.on("click"+s,function(e){l.state.opened?l.close():l.open(e)}),l.options.nativeOnMobile&&l.utils.isMobile()||(l.$element.on("focus"+s,function(){l.elements.input.focus()}),l.elements.input.prop({tabindex:l.originalTabindex,disabled:!1}).on("click"+s,function(e){e.stopPropagation()}).on("keydown"+s,c.proxy(l.handleKeys,l)).on("focusin"+s,function(e){l.elements.outerWrapper.addClass(l.classes.focus),l.elements.input.one("blur",function(){l.elements.input.blur()}),l.options.openOnFocus&&!l.state.opened&&l.open(e)}).on("focusout"+s,function(){l.elements.outerWrapper.removeClass(l.classes.focus),l.$li.removeClass("hidden"),l.elements.itemsScroll.scrollTop(0),l.highlight(0)}).on("input propertychange change",function(){var s=l.elements.input.val()||"";0<s.length?c.each(l.items,function(e,t){t.disabled||(0!==t.slug.indexOf(s.trim())?(l.$li.filter("[data-index="+t.index+"]").addClass("hidden"),t.hidden=!0):(l.$li.filter("[data-index="+t.index+"]").removeClass("hidden"),t.hidden=!1,l.highlight(t.index)))}):(l.$li.removeClass("hidden"),l.elements.itemsScroll.scrollTop(0))})),l.$li.on({mousedown:function(e){e.preventDefault(),e.stopPropagation()},click:function(){return l.select(c(this).data("index")),!1}})},handleKeys:function(e){var t=this,s=e.which,l=t.options.keys,i=-1<c.inArray(s,l.previous),n=-1<c.inArray(s,l.next),a=-1<c.inArray(s,l.select),o=-1<c.inArray(s,l.open),r=t.state.highlightedIdx,p=i&&0===r||n&&r+1===t.items.length,u=0;if(13===s&&e.preventDefault(),i||n){if(!t.options.allowWrap&&p)return;i&&(u=t.utils.previousEnabledItem(t.lookupItems,r),e.preventDefault()),n&&(u=t.utils.nextEnabledItem(t.lookupItems,r),e.preventDefault()),t.highlight(u)}if(a&&t.state.opened)return t.select(r),void(t.state.multiple&&t.options.multiple.keepMenuOpen||t.close());o&&!t.state.opened&&t.open()},refresh:function(){this.populate(),this.activate(),this.utils.triggerCallback("Refresh",this)},setOptionsDimensions:function(){var e=this,t=e.elements.items.closest(":visible").children(":hidden").addClass(e.classes.tempshow),s=e.options.maxHeight,l=e.elements.items.outerWidth(),i=e.elements.wrapper.outerWidth()-(l-e.elements.items.width());!e.options.expandToItemText||l<i?e.finalWidth=i:(e.elements.items.css("overflow","scroll"),e.elements.outerWrapper.width(9e4),e.finalWidth=e.elements.items.width(),e.elements.items.css("overflow",""),e.elements.outerWrapper.width("")),e.elements.items.width(e.finalWidth).height()>s&&e.elements.items.height(s),t.removeClass(e.classes.tempshow)},isInViewport:function(){var e=this;if(!0===e.options.forceRenderAbove)e.elements.outerWrapper.addClass(e.classes.above);else if(!0===e.options.forceRenderBelow)e.elements.outerWrapper.addClass(e.classes.below);else{var t=r.scrollTop(),s=r.height(),l=e.elements.outerWrapper.offset().top,i=l+e.elements.outerWrapper.outerHeight()+e.itemsHeight<=t+s,n=l-e.itemsHeight>t,a=!i&&n,o=!a;e.elements.outerWrapper.toggleClass(e.classes.above,a),e.elements.outerWrapper.toggleClass(e.classes.below,o)}},detectItemVisibility:function(e){var t=this,s=t.$li.filter("[data-index]");t.state.multiple&&(e=c.isArray(e)&&0===e.length?0:e,e=c.isArray(e)?Math.min.apply(Math,e):e);var l=s.eq(e).outerHeight(),i=s[e].offsetTop,n=t.elements.itemsScroll.scrollTop(),a=i+2*l;t.elements.itemsScroll.scrollTop(a>n+t.itemsHeight?a-t.itemsHeight:i-l<n?i-l:n)},open:function(e){var i=this;if(i.options.nativeOnMobile&&i.utils.isMobile())return!1;i.utils.triggerCallback("BeforeOpen",i),e&&(e.preventDefault(),i.options.stopPropagation&&e.stopPropagation()),i.state.enabled&&(i.setOptionsDimensions(),c("."+i.classes.hideselect,"."+i.classes.open).children()[p]("close"),i.state.opened=!0,i.itemsHeight=i.elements.items.outerHeight(),i.itemsInnerHeight=i.elements.items.height(),i.elements.outerWrapper.addClass(i.classes.open),i.elements.input.val(""),e&&"focusin"!==e.type&&i.elements.input.focus(),setTimeout(function(){t.on("click"+s,c.proxy(i.close,i)).on("scroll"+s,c.proxy(i.isInViewport,i))},1),i.isInViewport(),i.options.preventWindowScroll&&t.on("mousewheel.sl DOMMouseScroll"+s,"."+i.classes.scroll,function(e){var t=e.originalEvent,s=c(this).scrollTop(),l=0;"detail"in t&&(l=-1*t.detail),"wheelDelta"in t&&(l=t.wheelDelta),"wheelDeltaY"in t&&(l=t.wheelDeltaY),"deltaY"in t&&(l=-1*t.deltaY),(s===this.scrollHeight-i.itemsInnerHeight&&l<0||0===s&&0<l)&&e.preventDefault()}),i.detectItemVisibility(i.state.selectedIdx),i.highlight(i.state.multiple?-1:i.state.selectedIdx),i.utils.triggerCallback("Open",i))},close:function(){var e=this;e.utils.triggerCallback("BeforeClose",e),t.off(s),e.elements.outerWrapper.removeClass(e.classes.open),e.state.opened=!1,e.utils.triggerCallback("Close",e)},change:function(){var s=this;s.utils.triggerCallback("BeforeChange",s),s.state.multiple?(c.each(s.lookupItems,function(e){s.lookupItems[e].selected=!1,s.$element.find("option").prop("selected",!1)}),c.each(s.state.selectedIdx,function(e,t){s.lookupItems[t].selected=!0,s.$element.find("option").eq(t).prop("selected",!0)}),s.state.currValue=s.state.selectedIdx,s.setLabel(),s.utils.triggerCallback("Change",s)):s.state.currValue!==s.state.selectedIdx&&(s.$element.prop("selectedIndex",s.state.currValue=s.state.selectedIdx).data("value",s.lookupItems[s.state.selectedIdx].text),s.setLabel(),s.utils.triggerCallback("Change",s))},highlight:function(e){var t=this,s=t.$li.filter("[data-index]").removeClass("highlighted");t.utils.triggerCallback("BeforeHighlight",t),void 0===e||-1===e||t.lookupItems[e].disabled||(s.eq(t.state.highlightedIdx=e).addClass("highlighted"),t.detectItemVisibility(e),t.utils.triggerCallback("Highlight",t))},select:function(e){var t=this,s=t.$li.filter("[data-index]");if(t.utils.triggerCallback("BeforeSelect",t,e),void 0!==e&&-1!==e&&!t.lookupItems[e].disabled){if(t.state.multiple){t.state.selectedIdx=c.isArray(t.state.selectedIdx)?t.state.selectedIdx:[t.state.selectedIdx];var l=c.inArray(e,t.state.selectedIdx);-1!==l?t.state.selectedIdx.splice(l,1):t.state.selectedIdx.push(e),s.removeClass("selected").filter(function(e){return-1!==c.inArray(e,t.state.selectedIdx)}).addClass("selected")}else s.removeClass("selected").eq(t.state.selectedIdx=e).addClass("selected");t.state.multiple&&t.options.multiple.keepMenuOpen||t.close(),t.change(),t.close(),t.utils.triggerCallback("Select",t,e)}},destroy:function(e){var t=this;t.state&&t.state.enabled&&(t.elements.items.add(t.elements.wrapper).add(t.elements.input).remove(),e||t.$element.removeData(p).removeData("value"),t.$element.prop("tabindex",t.originalTabindex).off(s).off(t.eventTriggers).unwrap().unwrap(),t.state.enabled=!1)}},c.fn[p]=function(t){return this.each(function(){var e=c.data(this,p);e&&!e.disableOnMobile?"string"==typeof t&&e[t]?e[t]():e.init(t):c.data(this,p,new n(this,t))})},c.fn[p].defaults={onChange:function(e){c(e).change()},maxHeight:300,keySearchTimeout:500,arrowButtonMarkup:'<b class="button">&#x25be;</b>',disableOnMobile:!1,nativeOnMobile:!0,openOnFocus:!0,openOnHover:!1,hoverIntentTimeout:500,expandToItemText:!1,responsive:!1,preventWindowScroll:!0,inheritOriginalWidth:!1,allowWrap:!0,forceRenderAbove:!1,forceRenderBelow:!1,stopPropagation:!0,optionsItemBuilder:"{text}",labelBuilder:"{text}",listBuilder:!1,hasSearch:!1,keys:{previous:[38],next:[40],select:[9,13,27],open:[13,32,37,38,39,40],close:[9,27]},customClass:{prefix:p,camelCase:!1},multiple:{separator:", ",keepMenuOpen:!0,maxLabelEntries:!1}}});